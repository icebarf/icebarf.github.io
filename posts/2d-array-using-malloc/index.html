<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/fonts.css">
    
    <title>Sysgrammer</title>
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
        integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <script src="/js/dark.js" defer=""></script>

</head>


<html>
<!DOCTYPE html>
<html>

<body>
  <header class="site-header">

    <div class="wrapper">
      <a class="muted small" href="https://sysgrammer.github.io/">Sysgrammer</a>
    </div>
  </header>
</body>

</html>

<h1>2D array with pointers</h1>
<p class="post-meta"><time itemprop="datePublished">June 27, 2021</time>
</p>
<h1 id="concept">Concept</h1>
<p>In this case we&rsquo;re not gonna be using as quote-on-quote multidimensional arrays.
We&rsquo;re gonna be using a pointer to an array and then Use the pointer offset &ldquo;like&rdquo;
an array. Essentially what I am trying to get at is the follwing:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">int</span> (<span style="color:#f92672">*</span>my_arr)[]
</code></pre></div><p>This declares my array as a pointer to an array of integers.</p>
<p>And to rid us of the confusion we&rsquo;re gonna use a <code>typedef</code> some <code>type</code> to
<code>type[ARRAY]</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">typedef</span> type type_array[LENGTH];
</code></pre></div><p>The above syntax is basically declare <code>type_array</code> as an array of <code>type</code></p>
<p>Here, type is any builtin type or a struct type or a typedef type  and LENGTH
is the is the number of columns in the 2D array.</p>
<p>An example for something without a typedef would be</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">int</span> (<span style="color:#f92672">*</span>ptr_to_arr_func ())[]{
    ...
}
</code></pre></div><p>This declaration translated to English would be:</p>
<p><code>Declare ptr_to_arr_func as a function returning a pointer to an array of ints</code></p>
<p>We basically rid ourselves of this daunting syntax. With the typedef in the
following code snippet, the declaration, <code>int_array *get_array()</code> would
translate to:</p>
<p><code>Declare get_array as a function returning pointer int_array</code></p>
<h4 id="snippet">Snippet</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#define LENGTH  50
</span><span style="color:#75715e">#define WIDTH   50
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">int</span> int_array[LENGTH];

int_array <span style="color:#f92672">*</span><span style="color:#a6e22e">get_array</span>(){
    int_array <span style="color:#f92672">*</span>array <span style="color:#f92672">=</span> malloc(LENGTH <span style="color:#f92672">*</span> WIDTH (<span style="color:#f92672">*</span>array));
    <span style="color:#75715e">/*  The same as int (*array)[LENGTH] = malloc(...)  */</span>
    <span style="color:#66d9ef">return</span> array;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){
    int_array <span style="color:#f92672">*</span>my_2d_arr <span style="color:#f92672">=</span> get_array();
    <span style="color:#75715e">// The same as int (*my_2d_arr)[LENGTH] = ...
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Now pointer to array can be used like this -&gt; my_2d_arr[i][j]
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Similar to a 2D array, when in reality it&#39;s just a pointer to an array
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Pointer-to-array and a 2D arrays are &#34;very different&#34; concepts.
</span><span style="color:#75715e"></span>}
</code></pre></div><p>This gives us something similar to a dynamically allocated 2D array with some
memory allocated to it. You can use a for loop to set its element to zero
or something. The first Subscript operator <code>[]</code> is actually the pointer offset
and the second <code>[]</code> is the element of array.</p>
<p>ex:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> LENGTH; i<span style="color:#f92672">++</span>){
    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> WIDTH; j<span style="color:#f92672">++</span>){
        my_2d_arr[i][j] <span style="color:#f92672">=</span> SOME_VAL;
    }
}
</code></pre></div><p>The above method is also true for any struct type or typedef and elements can
be accessed with the <code>.</code> operator if it isn&rsquo;t a pointer. You can use <code>-&gt;</code> if you
declared a <code>*(*my_2d_arr)[LENGTH]</code>.</p>
<h3 id="note">Note</h3>
<p>This isn&rsquo;t meant for external readers but rather personal use. If you discover
this on the internet and find it confusing, I do not blame you.</p>


<footer>
    <div>
        <h3><a href="https://sysgrammer.github.io/posts">Back to all posts</a></h3>
    </div>
    <hr>
    <p>Go <a href="https://sysgrammer.github.io//index.xml">here</a> for an RSS feed.</p>
</footer>

</html>