<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/fonts.css">
    
    <title>Sysgrammer</title>
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
        integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <script src="/js/dark.js" defer=""></script>

</head>


<html>
<!DOCTYPE html>
<html>

<body>
  <header class="site-header">

    <div class="wrapper">
      <a class="muted small" href="https://sysgrammer.github.io/">Sysgrammer</a>
    </div>
  </header>
</body>

</html>

<h1>2D array using pointers and manually allocated memory</h1>
<p class="post-meta"><time itemprop="datePublished">June 27, 2021</time>
</p>
<h1 id="2d-arrays">2D Arrays</h1>
<p>2d arrays can be allocated memory with malloc/calloc using the following
methods</p>
<p>First we declare a typedef for a function that we need to initialise the 2-d
array with. This also assumes the size of 2-d array is known first.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">typedef</span> type type_array[LENGTH];
</code></pre></div><p>Here, type is any builtin type or a struct type or a typedef type  and LENGTH
is the is the number of columns in the 2D array. An example would be:</p>
<h4 id="builtin-type">Builtin type</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#define LENGTH  50
</span><span style="color:#75715e">#define WIDTH   50
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">int</span> int_array[LENGTH];

int_array <span style="color:#f92672">*</span><span style="color:#a6e22e">get_array</span>(){
    <span style="color:#66d9ef">int</span> (<span style="color:#f92672">*</span>array)[LENGTH] <span style="color:#f92672">=</span> malloc(LENGTH <span style="color:#f92672">*</span> WIDTH (<span style="color:#f92672">*</span>array));
    <span style="color:#66d9ef">return</span> array;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){
    <span style="color:#66d9ef">int</span> (<span style="color:#f92672">*</span>my_2d_arr)[LENGTH] <span style="color:#f92672">=</span> get_array();
    <span style="color:#75715e">// Now array can be used like this -&gt; my_2d_arr[i][j]
</span><span style="color:#75715e"></span>}
</code></pre></div><p>The above way shows how to use memory allocator functions to get a 2D array and
use it like a normal array. You can use a for loop to set its element to zero
or something.</p>
<p>ex:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> LENGTH; i<span style="color:#f92672">++</span>){
    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> WIDTH; j<span style="color:#f92672">++</span>){
        my_2d_arr[i][j] <span style="color:#f92672">=</span> SOME_VAL;
    }
}
</code></pre></div><p>The above method is also true for any struct type or typedef and elements can
be used with the <code>.</code> operator if it isn&rsquo;t a pointer. You can use <code>-&gt;</code> if you
declared a <code>*(*my_2d_arr)[LENGTH]</code> and <code>my_2d_arr</code> is some pointer to array of
some struct type.</p>
<h3 id="note">Note</h3>
<p>This isn&rsquo;t meant for external readers but rather personal use. If you discover
this on the internet and find it confusing, I do not blame you.</p>


<footer>
    <div>
        <h3><a href="https://sysgrammer.github.io/posts">Back to all posts</a></h3>
    </div>
    <hr>
    <p>Go <a href="https://sysgrammer.github.io//index.xml">here</a> for an RSS feed.</p>
</footer>

</html>